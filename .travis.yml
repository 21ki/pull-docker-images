language: bash
os: windows
services: docker

env:
 global:
   - DOCKER_HUB=willdockerhub
   - ALI_REGISTRY=registry.cn-shenzhen.aliyuncs.com/windows-os

before_script:
  - docker version
  - env | sort
  - docker login -u $DOCKER_USERNAME -p $DOCKER_PASSWORD
#  - docker login -u $ALI_USERNAME  -p $ALI_PASSWORD  registry.cn-shenzhen.aliyuncs.com 

script:
  - |
    (
      set -Eeuo pipefail
      set -x
       
      #pull image
      docker pull mcr.microsoft.com/dotnet/framework/runtime:3.5
 
      #tag image
      docker tag mcr.microsoft.com/dotnet/framework/runtime:3.5 registry.cn-shenzhen.aliyuncs.com/windows-baseos/dotnet-framework-runtime:3.5
      docker tag mcr.microsoft.com/dotnet/framework/runtime:3.5 willdockerhub/dotnet-framework-runtime:3.5   
      #push image
#      docker push registry.cn-shenzhen.aliyuncs.com/windows-baseos/dotnet-framework-runtime:3.5
      docker push willdockerhub/dotnet-framework-runtime:3.5
    )

after_script:
  - docker images
